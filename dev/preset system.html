

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Preset system &mdash; Archipack 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Archipack 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Extending archipack" href="../extending archipack.html"/>
        <link rel="next" title="Feedback panel" href="feedback panel.html"/>
        <link rel="prev" title="Manipulable" href="manipulable.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Archipack
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user guide.html">User guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../extending archipack.html">Extending archipack</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="developper guide.html">Developper guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="bulk updates.html">Bulk update</a></li>
<li class="toctree-l2"><a class="reference internal" href="archipackObject.html">ArchipackObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulable.html">Manipulable</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Preset system</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#there-are-two-kind-of-presets">There are two kind of presets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#preset-menu-operator">Preset menu Operator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation-sample">Implementation sample</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#save-destroy-preset-operator">Save / Destroy preset operator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#call-from-object-panel">Call from object panel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#create-operator">Create Operator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Implementation sample</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="feedback panel.html">Feedback panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="pygeos.html">pygeos</a></li>
<li class="toctree-l2"><a class="reference internal" href="cutters.html">Cutters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Archipack</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../extending archipack.html">Extending archipack</a> &raquo;</li>
        
      <li>Preset system</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/dev/preset system.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="preset-system">
<h1>Preset system<a class="headerlink" href="#preset-system" title="Permalink to this headline">¶</a></h1>
<p>Blender does support advanced presets system right out of the box.
The api take care of serialisation and unserialisation.
Archipack does extend this api to provide thumbs and on screen seekable menu.</p>
<div class="section" id="there-are-two-kind-of-presets">
<h2>There are two kind of presets<a class="headerlink" href="#there-are-two-kind-of-presets" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Factory stored under /addon/presets/</li>
<li>User defined, stored under /user profile/presets/</li>
</ul>
</div></blockquote>
<p>Techically they are the same, but factory’s one are shipped with addon where user defined one will be stored on user prefs directory.</p>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>In order to make objects “preset aware” one need 2 operators.</p>
<blockquote>
<div><ul class="simple">
<li>Preset menu Operator</li>
<li>Save / destroy preset Operator</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="preset-menu-operator">
<h2>Preset menu Operator<a class="headerlink" href="#preset-menu-operator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Requirements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> inherit from PresetMenuOperator</li>
<li>preset_subdir must match object PropertyGroup name, with <a href="#id8"><span class="problematic" id="id9">archipack_</span></a> prefix</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="implementation-sample">
<h3>Implementation sample<a class="headerlink" href="#implementation-sample" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="hll"><span class="k">class</span> <span class="nc">ARCHIPACK_OT_fence_preset_menu</span><span class="p">(</span><span class="n">PresetMenuOperator</span><span class="p">,</span> <span class="n">Operator</span><span class="p">):</span>
</span>        <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;archipack.fence_preset_menu&quot;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Fence Presets&quot;</span>
        <span class="c1"># Alter this using the base PropertyGroup class name (MUST use archipack_ prefix)</span>
<span class="hll">        <span class="n">preset_subdir</span> <span class="o">=</span> <span class="s2">&quot;archipack_fence&quot;</span>
</span></pre></div>
</div>
<p><strong>Preset menu Operator may use a “preset_operator” option eg in draw a window / draw a door</strong></p>
<blockquote>
<div><ul class="simple">
<li>preset_operator: string, bl_idname of operator to call after selection, in the form “category.operator”.</li>
</ul>
</div></blockquote>
<p>When not specified, default to create operator, using preset_subdir as operator bl_idname, eg: bpy.ops.archipack.fence</p>
<p>The operator handling preset operation must take “filename” as string input and handle loading of preset, where filename is a python preset absolute filename with path.</p>
</div>
<div class="section" id="id2">
<h3>Implementation sample<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">row</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.fence_preset_menu&quot;</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Fence&quot;</span><span class="p">,</span>
            <span class="n">icon_value</span><span class="o">=</span><span class="n">icons</span><span class="p">[</span><span class="s2">&quot;fence&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">icon_id</span>
            <span class="p">)</span><span class="o">.</span><span class="n">preset_operator</span> <span class="o">=</span> <span class="s2">&quot;archipack.fence&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="save-destroy-preset-operator">
<h2>Save / Destroy preset operator<a class="headerlink" href="#save-destroy-preset-operator" title="Permalink to this headline">¶</a></h2>
<p>This operator does take care of rendering thumbs on save.</p>
<div class="section" id="id3">
<h3>Requirements<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> inherit from ArchipackPreset</li>
<li>You may add properties you dont want to save in presets in blacklist, HIDDEN and SKIP_SAVE property are ignored by default.</li>
<li>preset_menu <strong>MUST</strong> match menu preset operator class name.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id4">
<h3>Implementation sample<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="hll"><span class="k">class</span> <span class="nc">ARCHIPACK_OT_fence_preset</span><span class="p">(</span><span class="n">ArchipackPreset</span><span class="p">,</span> <span class="n">Operator</span><span class="p">):</span>
</span>        <span class="sd">&quot;&quot;&quot;Add a Fence Preset&quot;&quot;&quot;</span>
        <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;archipack.fence_preset&quot;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Add Fence Preset&quot;</span>
<span class="hll">        <span class="n">preset_menu</span> <span class="o">=</span> <span class="s2">&quot;ARCHIPACK_OT_fence_preset_menu&quot;</span>
</span>
        <span class="nd">@property</span>
        <span class="k">def</span> <span class="nf">blacklist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="c1"># Blacklist property you want store by name</span>
<span class="hll">                <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;n_parts&#39;</span><span class="p">,</span> <span class="s1">&#39;parts&#39;</span><span class="p">,</span> <span class="s1">&#39;manipulators&#39;</span><span class="p">,</span> <span class="s1">&#39;user_defined_path&#39;</span><span class="p">]</span>
</span></pre></div>
</div>
</div>
</div>
<div class="section" id="call-from-object-panel">
<h2>Call from object panel<a class="headerlink" href="#call-from-object-panel" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id5">
<h3>Implementation sample<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">row</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.fence_preset_menu&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">ARCHIPACK_OT_fence_preset</span><span class="o">.</span><span class="n">bl_label</span><span class="p">)</span>
<span class="n">row</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.fence_preset&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;ZOOMIN&#39;</span><span class="p">)</span>
<span class="n">row</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.fence_preset&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;ZOOMOUT&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">remove_active</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-operator">
<h2>Create Operator<a class="headerlink" href="#create-operator" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3>Requirements<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> Inherits from ArchipackCreateTool to handle filename input</li>
<li><strong>MUST</strong> call load_preset method.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id7">
<h3>Implementation sample<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="hll"><span class="k">class</span> <span class="nc">ARCHIPACK_OT_fence</span><span class="p">(</span><span class="n">ArchipackCreateTool</span><span class="p">,</span> <span class="n">Operator</span><span class="p">):</span>
</span>        <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;archipack.fence&quot;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Fence&quot;</span>
        <span class="n">bl_description</span> <span class="o">=</span> <span class="s2">&quot;Fence&quot;</span>
        <span class="n">bl_category</span> <span class="o">=</span> <span class="s1">&#39;Archipack&#39;</span>
        <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;REGISTER&#39;</span><span class="p">,</span> <span class="s1">&#39;UNDO&#39;</span><span class="p">}</span>

        <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">meshes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Fence&quot;</span><span class="p">)</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Fence&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">archipack_fence</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
                <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
                <span class="n">o</span><span class="o">.</span><span class="n">select</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">o</span>
<span class="hll">                <span class="bp">self</span><span class="o">.</span><span class="n">load_preset</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</span>                <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="feedback panel.html" class="btn btn-neutral float-right" title="Feedback panel" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="manipulable.html" class="btn btn-neutral" title="Manipulable" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, stephen leger.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>