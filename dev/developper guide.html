

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Developper guide &mdash; Archipack 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="author" title="About these documents"
              href="../about.html"/>
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Archipack 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Extending archipack" href="../extending archipack.html"/>
        <link rel="next" title="Bulk update" href="bulk updates.html"/>
        <link rel="prev" title="Extending archipack" href="../extending archipack.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Archipack
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user guide.html">User guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../extending archipack.html">Extending archipack</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Developper guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#imports">Imports</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#implementation-sample">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#propertygroup">PropertyGroup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#naming-convention">Naming convention</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation-sample-a-box">Implementation sample (a box)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#panel-t-panel-in-ui">Panel (T panel in UI)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Naming convention</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Implementation sample (a box)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#create-tool">Create Tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Naming convention</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#preset-menu-operator">Preset menu operator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Naming convention</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#preset-add-destroy-operator">Preset add/destroy operator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Naming convention</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#manipuate-operator">Manipuate Operator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id13">Naming convention</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#register-unregister">Register/Unregister</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">Implementation sample</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#modify-the-init-py">Modify the __init__.py</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id18">Imports</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-panel">Create panel</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shift-a-and-add-mesh-menu">Shift + a and add mesh menu</a></li>
<li class="toctree-l4"><a class="reference internal" href="#register-and-unregister-function">Register and unregister function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bulk updates.html">Bulk update</a></li>
<li class="toctree-l2"><a class="reference internal" href="archipackObject.html">ArchipackObject</a></li>
<li class="toctree-l2"><a class="reference internal" href="manipulable.html">Manipulable</a></li>
<li class="toctree-l2"><a class="reference internal" href="preset system.html">Preset system</a></li>
<li class="toctree-l2"><a class="reference internal" href="feedback panel.html">Feedback panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="cutters.html">Cutters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Archipack</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../extending archipack.html">Extending archipack</a> &raquo;</li>
        
      <li>Developper guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/dev/developper guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="developper-guide">
<h1>Developper guide<a class="headerlink" href="#developper-guide" title="Permalink to this headline">¶</a></h1>
<p>Want to contribute ? add your own parametric object ?</p>
<p>Archipack’s api provide all needed parts to handle parametric objects, as easy to import subclasses, so you may focus on your base object mesh building.
Here you’ll find a “quick start” dev guide with all required parts.</p>
<p><a class="reference external" href="https://github.com/s-leger/archipack/blob/master/archipack_toolkit.py">Download sample file</a></p>
<div class="section" id="imports">
<h2>Imports<a class="headerlink" href="#imports" title="Permalink to this headline">¶</a></h2>
<div class="section" id="implementation-sample">
<h3>Implementation sample<a class="headerlink" href="#implementation-sample" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="imports-py">
<div class="code-block-caption"><span class="caption-text">Minimal required imports</span><a class="headerlink" href="#imports-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bpy</span>
<span class="kn">from</span> <span class="nn">bpy.types</span> <span class="kn">import</span> <span class="n">Operator</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">,</span> <span class="n">Mesh</span><span class="p">,</span> <span class="n">Panel</span>

<span class="c1"># Minimal required property types</span>
<span class="kn">from</span> <span class="nn">bpy.props</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">FloatProperty</span><span class="p">,</span> <span class="n">BoolProperty</span><span class="p">,</span> <span class="n">CollectionProperty</span>
        <span class="p">)</span>
<span class="kn">from</span> <span class="nn">mathutils</span> <span class="kn">import</span> <span class="n">Vector</span>

<span class="c1"># Bmesh made easy</span>
<span class="kn">from</span> <span class="nn">.bmesh_utils</span> <span class="kn">import</span> <span class="n">BmeshEdit</span> <span class="k">as</span> <span class="n">bmed</span>

<span class="c1"># Manipulable</span>
<span class="kn">from</span> <span class="nn">.archipack_manipulator</span> <span class="kn">import</span> <span class="n">Manipulable</span>

<span class="c1"># Preset system</span>
<span class="kn">from</span> <span class="nn">.archipack_preset</span> <span class="kn">import</span> <span class="n">ArchipackPreset</span><span class="p">,</span> <span class="n">PresetMenuOperator</span>

<span class="c1"># Base for Propertygroup and create tool Operator</span>
<span class="kn">from</span> <span class="nn">.archipack_object</span> <span class="kn">import</span> <span class="n">ArchipackCreateTool</span><span class="p">,</span> <span class="n">ArchipackObject</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="propertygroup">
<h2>PropertyGroup<a class="headerlink" href="#propertygroup" title="Permalink to this headline">¶</a></h2>
<p>The main propertyGroup is the heart of parametric object, generating mesh on parameter changes using bmesh, and updating “manipulators” location according.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Separate properties for vertex, faces, material indexes and uvmaps is not required, made like this as for such simple object it allow to keep code clean.
More complex objects may require to build uvs maps knowing vertex location, and such design pattern would not work.</p>
</div>
<div class="section" id="naming-convention">
<h3>Naming convention<a class="headerlink" href="#naming-convention" title="Permalink to this headline">¶</a></h3>
<p>archipack_ prefix, then your meanfull class name</p>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> inherit from ArchipackObject and Manipulable</li>
<li><strong>MUST</strong> implement update() function generating / refreshing mesh and manipulators location, see <a class="reference internal" href="manipulable.html#updating-manipulator"><span class="std std-ref">Updating manipulator location</span></a></li>
<li><strong>MUST</strong> implement setup_manipulators() function filling manipulators Collection see <a class="reference internal" href="manipulable.html#available-manipulators"><span class="std std-ref">Available manipulators (type_key)</span></a></li>
<li><strong>MUST</strong> have auto_update property to disable mesh updating for bulk updates</li>
<li>Properties <strong>SHOULD</strong> call update (use update=update in property definition)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="implementation-sample-a-box">
<h3>Implementation sample (a box)<a class="headerlink" href="#implementation-sample-a-box" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="property-py">
<div class="code-block-caption"><span class="caption-text">Minimal implementation using all features</span><a class="headerlink" href="#property-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">archipack_myobject</span><span class="p">(</span><span class="n">ArchipackObject</span><span class="p">,</span> <span class="n">Manipulable</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Archipack toolkit sample&quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">FloatProperty</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Width&quot;</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                        <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;LENGTH&#39;</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="s1">&#39;DISTANCE&#39;</span><span class="p">,</span>
                        <span class="n">update</span><span class="o">=</span><span class="n">update</span>
                        <span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">FloatProperty</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Depth&quot;</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                        <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;LENGTH&#39;</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="s1">&#39;DISTANCE&#39;</span><span class="p">,</span>
                        <span class="n">update</span><span class="o">=</span><span class="n">update</span>
                        <span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">FloatProperty</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Height&quot;</span><span class="p">,</span>
                        <span class="n">default</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
                        <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;LENGTH&#39;</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="s1">&#39;DISTANCE&#39;</span><span class="p">,</span>
                        <span class="n">update</span><span class="o">=</span><span class="n">update</span>
                        <span class="p">)</span>
        <span class="n">auto_update</span> <span class="o">=</span> <span class="n">BoolProperty</span><span class="p">(</span>
                        <span class="c1"># Wont save auto_update state in any case</span>
                        <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;SKIP_SAVE&#39;</span><span class="p">},</span>
                        <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                        <span class="n">update</span><span class="o">=</span><span class="n">update</span>
                        <span class="p">)</span>

        <span class="nd">@property</span>
        <span class="k">def</span> <span class="nf">verts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                        Object vertices coords</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="n">x</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
                <span class="n">y</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
                <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span>
                <span class="k">return</span> <span class="p">[</span>
                        <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                        <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                        <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span>
                        <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span>
                        <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
                <span class="p">]</span>

        <span class="nd">@property</span>
        <span class="k">def</span> <span class="nf">faces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                        Object faces vertices index</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">return</span> <span class="p">[</span>
                        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                        <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
                <span class="p">]</span>

        <span class="nd">@property</span>
        <span class="k">def</span> <span class="nf">uvs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                        Object faces uv coords</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">return</span> <span class="p">[</span>
                        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span>
                        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
                <span class="p">]</span>

        <span class="nd">@property</span>
        <span class="k">def</span> <span class="nf">matids</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                        Object material indexes for each face</span>
<span class="sd">                &quot;&quot;&quot;</span>
                <span class="k">return</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">setup_manipulators</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">manipulators</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="c1"># add manipulator for x property</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manipulators</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">prop1_name</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">type_key</span> <span class="o">=</span> <span class="s1">&#39;SIZE&#39;</span>

                        <span class="c1"># add manipulator for y property</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manipulators</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">prop1_name</span> <span class="o">=</span> <span class="s2">&quot;y&quot;</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">type_key</span> <span class="o">=</span> <span class="s1">&#39;SIZE&#39;</span>

                        <span class="c1"># add manipulator for z property</span>
                        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">manipulators</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">prop1_name</span> <span class="o">=</span> <span class="s2">&quot;z&quot;</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">type_key</span> <span class="o">=</span> <span class="s1">&#39;SIZE&#39;</span>
                        <span class="c1"># draw this one on xz plane</span>
                        <span class="n">s</span><span class="o">.</span><span class="n">normal</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>

                <span class="c1"># provide support for &quot;copy to selected&quot;</span>
                <span class="n">o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_in_selection</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_update</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">o</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="k">return</span>

                <span class="c1"># dynamically create manipulators when needed</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setup_manipulators</span><span class="p">()</span>

                <span class="c1"># update your mesh from parameters</span>
                <span class="n">bmed</span><span class="o">.</span><span class="n">buildmesh</span><span class="p">(</span><span class="n">context</span><span class="p">,</span>
                                           <span class="n">o</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">verts</span><span class="p">,</span>
                                           <span class="bp">self</span><span class="o">.</span><span class="n">faces</span><span class="p">,</span>
                                           <span class="n">matids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">matids</span><span class="p">,</span>
                                           <span class="n">uvs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">uvs</span><span class="p">,</span>
                                           <span class="n">weld</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

                <span class="c1"># update manipulators location (3d location in object coordsystem)</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manipulators</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_pts</span><span class="p">([(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manipulators</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_pts</span><span class="p">([(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">manipulators</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_pts</span><span class="p">([(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>

                <span class="c1"># always restore context</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">restore_context</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="panel-t-panel-in-ui">
<h2>Panel (T panel in UI)<a class="headerlink" href="#panel-t-panel-in-ui" title="Permalink to this headline">¶</a></h2>
<p>Main ui panel to modify object properties.</p>
<div class="section" id="id1">
<h3>Naming convention<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>ARCHIPACK_PT_ prefix then your object name</p>
</div>
<div class="section" id="id2">
<h3>Requirements<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> poll using your PropertyGroup class</li>
<li><strong>MUST</strong> call manipulate operator</li>
<li><strong>MUST</strong> call presets operators</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id3">
<h3>Implementation sample (a box)<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="panel-py">
<div class="code-block-caption"><span class="caption-text">Minimal implementation using all features</span><a class="headerlink" href="#panel-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ARCHIPACK_PT_myobject</span><span class="p">(</span><span class="n">Panel</span><span class="p">):</span>
        <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;ARCHIPACK_PT_myobject&quot;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;MyObject&quot;</span>
        <span class="n">bl_space_type</span> <span class="o">=</span> <span class="s1">&#39;VIEW_3D&#39;</span>
        <span class="n">bl_region_type</span> <span class="o">=</span> <span class="s1">&#39;UI&#39;</span>
        <span class="n">bl_category</span> <span class="o">=</span> <span class="s1">&#39;ArchiPack&#39;</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">poll</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
                <span class="c1"># ensure your object panel only show when active object is the right one</span>
                <span class="k">return</span> <span class="n">archipack_myobject</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">active_object</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">active_object</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">archipack_myobject</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
                        <span class="k">return</span>
                <span class="n">layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span>

                <span class="c1"># retrieve datablock of your object</span>
                <span class="n">props</span> <span class="o">=</span> <span class="n">archipack_myobject</span><span class="o">.</span><span class="n">datablock</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>

                <span class="c1"># Manipulate mode operator</span>
                <span class="n">layout</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s1">&#39;archipack.myobject_manipulate&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;HAND&#39;</span><span class="p">)</span>

                <span class="n">box</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
                <span class="n">row</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

                <span class="c1"># Presets operators</span>
                <span class="n">row</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.myobject_preset_menu&quot;</span><span class="p">,</span>
                                         <span class="n">text</span><span class="o">=</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">ARCHIPACK_OT_myobject_preset_menu</span><span class="o">.</span><span class="n">bl_label</span><span class="p">)</span>
                <span class="n">row</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.myobject_preset&quot;</span><span class="p">,</span>
                                          <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                          <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;ZOOMIN&#39;</span><span class="p">)</span>
                <span class="n">row</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.myobject_preset&quot;</span><span class="p">,</span>
                                          <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                          <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;ZOOMOUT&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">remove_active</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="n">row</span> <span class="o">=</span> <span class="n">layout</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
                <span class="n">box</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">box</span><span class="p">()</span>
                <span class="n">box</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Size&quot;</span><span class="p">)</span>
                <span class="n">box</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="n">props</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
                <span class="n">box</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="n">props</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span>
                <span class="n">box</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="n">props</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="create-tool">
<h2>Create Tool<a class="headerlink" href="#create-tool" title="Permalink to this headline">¶</a></h2>
<p>This operator implement creation tool for your object.
You may add it in N Panel and/or shift+A menu to allow users to create your objects.</p>
<div class="section" id="id4">
<h3>Naming convention<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>ARCHIPACK_OT_ prefix and then your object name
bl_idname name is archipack. prefix and then your object name</p>
</div>
<div class="section" id="id5">
<h3>Requirements<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> inherit from ArchipackCreateTool</li>
<li>bl_idname <strong>MUST</strong> match your object’s class name</li>
<li><strong>MUST</strong> call load_preset, passing your class property datablock</li>
<li><strong>MUST</strong> create an object, a mesh and link to scene</li>
<li><strong>MUST</strong> add your PropertyGoup</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id6">
<h3>Implementation sample<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="create-py">
<div class="code-block-caption"><span class="caption-text">Minimal implementation using all features</span><a class="headerlink" href="#create-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ARCHIPACK_OT_myobject</span><span class="p">(</span><span class="n">ArchipackCreateTool</span><span class="p">,</span> <span class="n">Operator</span><span class="p">):</span>
        <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;archipack.myobject&quot;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Myobject&quot;</span>
        <span class="n">bl_description</span> <span class="o">=</span> <span class="s2">&quot;Create Myobject&quot;</span>
        <span class="n">bl_category</span> <span class="o">=</span> <span class="s1">&#39;Archipack&#39;</span>
        <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;REGISTER&#39;</span><span class="p">,</span> <span class="s1">&#39;UNDO&#39;</span><span class="p">}</span>

        <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>

                <span class="c1"># Create an empty mesh datablock</span>
                <span class="n">m</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">meshes</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Myobject&quot;</span><span class="p">)</span>

                <span class="c1"># Create an object using the mesh datablock</span>
                <span class="n">o</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Myobject&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

                <span class="c1"># Add your properties on mesh datablock</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">archipack_myobject</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>

                <span class="c1"># Link object into scene</span>
                <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">link</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>

                <span class="c1"># select and make active</span>
                <span class="n">o</span><span class="o">.</span><span class="n">select</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">o</span>

                <span class="c1"># Load preset into datablock</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">load_preset</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

                <span class="c1"># add a material</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_material</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">o</span>

        <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;OBJECT&quot;</span><span class="p">:</span>
                        <span class="n">bpy</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">select_all</span><span class="p">(</span><span class="n">action</span><span class="o">=</span><span class="s2">&quot;DESELECT&quot;</span><span class="p">)</span>
                        <span class="n">o</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
                        <span class="n">o</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">cursor_location</span>
                        <span class="n">o</span><span class="o">.</span><span class="n">select</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="n">o</span>

                        <span class="c1"># Start manipulate mode</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">manipulate</span><span class="p">()</span>
                        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>
                <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">report</span><span class="p">({</span><span class="s1">&#39;WARNING&#39;</span><span class="p">},</span> <span class="s2">&quot;Archipack: Option only valid in Object mode&quot;</span><span class="p">)</span>
                        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;CANCELLED&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="preset-menu-operator">
<h2>Preset menu operator<a class="headerlink" href="#preset-menu-operator" title="Permalink to this headline">¶</a></h2>
<p>Preset system require two operators, this one display graphical preset menu.</p>
<div class="section" id="id7">
<h3>Naming convention<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>ARCHIPACK_OT_ prefix and then your object name then _preset_menu
bl_idname name is archipack. prefix and then your object name then _preset_menu</p>
</div>
<div class="section" id="id8">
<h3>Requirements<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> define preset_subdir using PropertyGroup class name</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id9">
<h3>Implementation sample<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="preset-menu-py">
<div class="code-block-caption"><span class="caption-text">Minimal implementation using all features</span><a class="headerlink" href="#preset-menu-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ARCHIPACK_OT_myobject_preset_menu</span><span class="p">(</span><span class="n">PresetMenuOperator</span><span class="p">,</span> <span class="n">Operator</span><span class="p">):</span>
        <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;archipack.myobject_preset_menu&quot;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Myobject preset&quot;</span>
        <span class="n">preset_subdir</span> <span class="o">=</span> <span class="s2">&quot;archipack_myobject&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="preset-add-destroy-operator">
<h2>Preset add/destroy operator<a class="headerlink" href="#preset-add-destroy-operator" title="Permalink to this headline">¶</a></h2>
<p>Preset system require two operators, this one allow user to create and destroy presets.</p>
<div class="section" id="id10">
<h3>Naming convention<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Use ARCHIPACK_OT_ prefix and then your object name then _preset
bl_idname name is archipack. prefix and then your object name then _preset</p>
</div>
<div class="section" id="id11">
<h3>Requirements<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> define preset_menu using the class name of preset menu operator</li>
<li><strong>MAY</strong> define blacklist, an array of property names you don’t want to save in presets</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id12">
<h3>Implementation sample<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="preset-py">
<div class="code-block-caption"><span class="caption-text">Minimal implementation using all features</span><a class="headerlink" href="#preset-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ARCHIPACK_OT_myobject_preset</span><span class="p">(</span><span class="n">ArchipackPreset</span><span class="p">,</span> <span class="n">Operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a Myobject Preset&quot;&quot;&quot;</span>
        <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;archipack.myobject_preset&quot;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Add Myobject preset&quot;</span>
        <span class="n">preset_menu</span> <span class="o">=</span> <span class="s2">&quot;ARCHIPACK_OT_myobject_preset_menu&quot;</span>

        <span class="nd">@property</span>
        <span class="k">def</span> <span class="nf">blacklist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;manipulators&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="manipuate-operator">
<h2>Manipuate Operator<a class="headerlink" href="#manipuate-operator" title="Permalink to this headline">¶</a></h2>
<p>This operator allow user to enter/exit from “manipulate” mode.</p>
<div class="section" id="id13">
<h3>Naming convention<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>Use ARCHIPACK_OT_ prefix and then your object name then _manipulate
bl_idname name is archipack. prefix and then your object name then _manipulate</p>
</div>
<div class="section" id="id14">
<h3>Requirements<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><strong>MUST</strong> poll using your propertyGroup class</li>
<li><strong>MUST</strong> call .manipulable_invoke(context)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id15">
<h3>Implementation sample<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="manipulate-py">
<div class="code-block-caption"><span class="caption-text">Minimal implementation using all features</span><a class="headerlink" href="#manipulate-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ARCHIPACK_OT_myobject_manipulate</span><span class="p">(</span><span class="n">Operator</span><span class="p">):</span>
        <span class="n">bl_idname</span> <span class="o">=</span> <span class="s2">&quot;archipack.myobject_manipulate&quot;</span>
        <span class="n">bl_label</span> <span class="o">=</span> <span class="s2">&quot;Manipulate&quot;</span>
        <span class="n">bl_description</span> <span class="o">=</span> <span class="s2">&quot;Manipulate&quot;</span>
        <span class="n">bl_options</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;REGISTER&#39;</span><span class="p">,</span> <span class="s1">&#39;UNDO&#39;</span><span class="p">}</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">poll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">archipack_myobject</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">active_object</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">invoke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
                <span class="n">d</span> <span class="o">=</span> <span class="n">archipack_myobject</span><span class="o">.</span><span class="n">datablock</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">active_object</span><span class="p">)</span>
                <span class="n">d</span><span class="o">.</span><span class="n">manipulable_invoke</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;FINISHED&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="register-unregister">
<h2>Register/Unregister<a class="headerlink" href="#register-unregister" title="Permalink to this headline">¶</a></h2>
<p>Each archipack object must register / unregister itself</p>
<div class="section" id="id16">
<h3>Requirements<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>PropertyGroup <strong>MUST</strong> register/unregister and be added as CollectionProperty of Mesh</li>
<li>Panel, create, preset and manipulate Operators <strong>MUST</strong> register/unregister</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="id17">
<h3>Implementation sample<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="register-py">
<div class="code-block-caption"><span class="caption-text">Minimal implementation using all features</span><a class="headerlink" href="#register-py" title="Permalink to this code">¶</a></div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">archipack_myobject</span><span class="p">)</span>
        <span class="n">Mesh</span><span class="o">.</span><span class="n">archipack_myobject</span> <span class="o">=</span> <span class="n">CollectionProperty</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">archipack_myobject</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ARCHIPACK_PT_myobject</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ARCHIPACK_OT_myobject</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ARCHIPACK_OT_myobject_preset_menu</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ARCHIPACK_OT_myobject_preset</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">register_class</span><span class="p">(</span><span class="n">ARCHIPACK_OT_myobject_manipulate</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">unregister</span><span class="p">():</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">archipack_myobject</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">Mesh</span><span class="o">.</span><span class="n">archipack_myobject</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">ARCHIPACK_PT_myobject</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">ARCHIPACK_OT_myobject</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">ARCHIPACK_OT_myobject_preset_menu</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">ARCHIPACK_OT_myobject_preset</span><span class="p">)</span>
        <span class="n">bpy</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">unregister_class</span><span class="p">(</span><span class="n">ARCHIPACK_OT_myobject_manipulate</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="modify-the-init-py">
<h2>Modify the __init__.py<a class="headerlink" href="#modify-the-init-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id18">
<h3>Imports<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">imp</span><span class="o">.</span><span class="n">reload</span><span class="p">(</span><span class="n">archipack_myobject</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">archipack_myobject</span>
</pre></div>
</div>
</div>
<div class="section" id="create-panel">
<h3>Create panel<a class="headerlink" href="#create-panel" title="Permalink to this headline">¶</a></h3>
<p>class TOOLS_PT_Archipack_Create(Panel) in draw function:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">col</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">column</span><span class="p">()</span>
<span class="n">subrow</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">align</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">subrow</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.myobject_preset_menu&quot;</span><span class="p">,</span>
                        <span class="n">text</span><span class="o">=</span><span class="s2">&quot;myobj&quot;</span><span class="p">,</span>
                        <span class="n">icon_value</span><span class="o">=</span><span class="n">icons</span><span class="p">[</span><span class="s2">&quot;door&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">icon_id</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">preset_operator</span> <span class="o">=</span> <span class="s2">&quot;archipack.myobject&quot;</span>
<span class="n">subrow</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.myobject_preset_menu&quot;</span><span class="p">,</span>
                        <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                        <span class="n">icon</span><span class="o">=</span><span class="s1">&#39;GREASEPENCIL&#39;</span>
                        <span class="p">)</span><span class="o">.</span><span class="n">preset_operator</span> <span class="o">=</span> <span class="s2">&quot;archipack.myobject_draw&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="shift-a-and-add-mesh-menu">
<h3>Shift + a and add mesh menu<a class="headerlink" href="#shift-a-and-add-mesh-menu" title="Permalink to this headline">¶</a></h3>
<p>on draw_menu():</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">layout</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="s2">&quot;archipack.door_preset_menu&quot;</span><span class="p">,</span>
                                <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Door&quot;</span><span class="p">,</span>
                                <span class="n">icon_value</span><span class="o">=</span><span class="n">icons</span><span class="p">[</span><span class="s2">&quot;door&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">icon_id</span>
                                <span class="p">)</span><span class="o">.</span><span class="n">preset_operator</span> <span class="o">=</span> <span class="s2">&quot;archipack.door&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="register-and-unregister-function">
<h3>Register and unregister function<a class="headerlink" href="#register-and-unregister-function" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">archipack_myobject</span><span class="o">.</span><span class="n">register</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">archipack_myobject</span><span class="o">.</span><span class="n">unregister</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="bulk updates.html" class="btn btn-neutral float-right" title="Bulk update" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../extending archipack.html" class="btn btn-neutral" title="Extending archipack" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, stephen leger.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>